var NavModule=function(){var e=$(window).width(),t=$(window).height(),a=$(window).width(),n=$("header"),o=$(".hamburger"),i=$("header .right"),s=function(){e>=768?i.find(".inner-wrapper").innerWidth(e):i.find(".inner-wrapper").innerHeight(t),n.hasClass("open")?(o.removeClass("active"),i.animate({width:e>=768?0:"100%",height:e>=768?"100%":n.find(".left").height()},600,"easeInOutQuart",function(){n.removeClass("open")})):(n.addClass("open"),o.addClass("active"),i.animate({width:"100%",height:"100%"},600,"easeInOutQuart"))};o.on("click",function(){s()}),$(".hero .arrow").length>0&&$(".hero .arrow").on("click",function(t){t.preventDefault(),$("html,body").animate({scrollTop:e>=768?$(".hero").height():$(".hero").height()-$("header").height()},1250,"easeInOutQuart")}),$(".top-btn").length>0&&$(".top-btn").on("click",function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},1250,"easeInOutQuart")}),$(".toc-wrap .arrow-wrap").on("click",function(){$(".toc-wrap").toggleClass("open")}),$(window).on("resize",function(){e=$(window).width(),t=$(window).height(),n.hasClass("open")||(i.removeAttr("style"),i.find(".inner-wrapper").removeAttr("style")),e!==a&&n.hasClass("open")&&s(),a=e})},SocialModule=function(){this.share=function(e,t,a,n){var o;"email"!==t&&(e.preventDefault(),"twitter"===t?social_share_url="https://twitter.com/share?url="+encodeURIComponent(a)+"&text="+encodeURIComponent(n):"facebook"===t?social_share_url="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a):"googleplus"===t&&(social_share_url="https://plus.google.com/share?url="+encodeURIComponent(a)),o=window.open(social_share_url,t,"width=500,height=500"),o.focus())}},HappyDaysPage=function(){var e,t,a=new SocialModule,n=$(window).width(),o=$(window).height(),i=$(".page-wrap"),s=0,r=0,d=1,h=i.length-1,c=[],l=[],u=$(".subheader-wrap"),p=function(){$.each(u,function(e,a){$(".toc-wrap ul").append("<li>"+$(a).find("h2").text()+"</li>"),e===u.length-1&&(t=$(".toc-wrap ul li"))})},f=function(e){$(t).removeClass("active");for(var a=0;a<$(u).index(i[d])+1;a++)$(t[a]).addClass("active")},w=function(){var e=$(i).index(u[$(this).index()]);console.log(e,r),r>e?g(e):v(e),$(".toc-wrap").removeClass("open"),ga("send","event","#100HappyDays","click","Table Of Contents - Item")};$(".toc-wrap ul").on("click","li",w);var m=function(){e=setInterval(function(){100>s?(s++,$("h1 .day-num").html(s)):(clearInterval(e),$("h1").fadeOut(400,"easeInOutQuart",function(){$("h1").html("#100HappyDays"),$("h1").fadeIn(300,"easeInOutQuart"),$(".hero p").animate({opacity:"1"},600,"easeInOutQuart")}),$(".story-nav .next").removeClass("inactive").addClass("animate"))},25)},g=function(e){var t=r;$(".story-nav .next").removeClass("inactive"),"undefined"==typeof e?r>0&&(h=r-1,$(".story-nav .prev").removeClass("inactive"),0===h&&($(".story-nav .prev").addClass("inactive"),$(".story-nav .next .start").removeClass("hidden"))):h=e,r=h,c.push(h),$(i[t]).css("z-index","1"),$(i[t]).find(".left-col").css({transform:"rotate3d(0, 2, 0, 90deg)"}),setTimeout(function(){$(i[t]).find(".right-col").fadeTo(500,0),$(i[t]).find(".left-col").css({transform:"rotate3d(0, 2, 0, 180deg)"}),setTimeout(function(){$(i[t]).hide()},500)},500),$(i[h]).css("z-index","2").show(),$(i[h]).find(".left-col").attr("style","transform:rotate3d(0, 2, 0, 0deg)"),$(i[h]).find(".right-col").css("opacity","1"),$(i[h]).find(".right-col").css({transform:"rotate3d(0, 2, 0, 90deg)"}),setTimeout(function(){$(i[h]).find(".left-col").fadeTo(500,1),$(i[h]).find(".right-col").css({transform:"rotate3d(0, 2, 0, 0deg)"})},500),$(i[h]).hasClass("subheader-wrap")&&f(h)},v=function(e){var t=r;$(".story-nav .prev").removeClass("inactive"),$(".story-nav .next").removeClass("animate"),$(".story-nav .next .start").addClass("hidden"),"undefined"==typeof e?r<i.length-1&&(d=r+1,$(".story-nav .next").removeClass("inactive"),d===i.length-1&&(console.log("boom"),$(".story-nav .next").addClass("inactive"))):d=e,r=d,l.push(d),$(i[t]).css("z-index","1"),$(i[t]).find(".right-col").css({transform:"rotate3d(0, 2, 0, 90deg)"}),setTimeout(function(){$(i[t]).find(".right-col").css({transform:"rotate3d(0, 2, 0, 180deg)"}),setTimeout(function(){$(i[t]).hide()},500)},500),$(i[d]).css("z-index","2").show(),$(i[d]).find(".left-col").css("opacity","1"),$(i[d]).find(".left-col").css({transform:"rotate3d(0, 2, 0, 90deg)"}),setTimeout(function(){$(i[d]).find(".right-col").fadeTo(500,1),$(i[d]).find(".left-col").css({transform:"rotate3d(0, 2, 0, 0deg)"})},500),$(i[d]).hasClass("subheader-wrap")&&f(d)};$(".story-nav .prev").on("click",function(){$(this).hasClass("inactive")||g()}),$(".story-nav .next").on("click",function(){$(this).hasClass("inactive")||v()}),$("body").on("keyup",function(e){37===e.which||37===e.keyCode?$(".story-nav .prev").hasClass("inactive")||g():(39===e.which||39===e.keyCode)&&($(".story-nav .next").hasClass("inactive")||v())}),$(".social-icons a").on("click",function(e){var t="http://series.hashtagsunplugged.com/100happydays",n="The Story Behind #100HappyDays where for 100 days people challenge themselves to post tweets or images when they’re happy. #BehindTheHashtag",o=$(this).attr("data-social");a.share(e,o,t,n)}),$(window).on("resize",function(){n=$(window).width(),o=$(window).height()}),$(document).on("ready",function(){p(),m(),$(".social-icons a.email").attr("href","mailto:?subject="+encodeURIComponent("Check Out The Story Behind #100HappyDays")+"&body="+encodeURIComponent('"In the beginning I struggled to find even one picture a day, but by the end I was finding 10 pictures a day&mdash;it was so much easier to find the things to make me happy." - Dmitry Golubnichy, as told to TODAY.com \n\nRead the story behind #100HappyDays here: series.hashtagsunplugged.com/100happydays'))})},HeForShePage=function(){var e,t,a=new SocialModule,n=($(window).width(),$(window).height()),o=($(window).scrollTop(),$(window).scrollTop()-1,0),i=$(".slideshow .caption-wrap"),s=$(".slideshow .image-wrap"),r=$("section");$(".social-icons a").on("click",function(e){var t="http://series.hashtagsunplugged.com/heforshe",n="The Story Behind #HeForShe, the UN Women's solidarity movement for gender equality. #BehindTheHashtag",o=$(this).attr("data-social");a.share(e,o,t,n)});var d=function(){var e=$(this).parents(".media-wrap").find("iframe").attr("data-src"),t=$(this).parent();$(this).parents(".media-wrap").find("iframe").attr("src",e),t.animate({opacity:0},600,function(){t.remove()})};$(".media-wrap .play-btn-wrap").on("click",d);var h=function(){$(".slideshow .prev").hasClass("disabled")||(o>0?(e=o-1,o=e,o<s.length-1&&$(".slideshow .next").removeClass("disabled"),0===o&&$(".slideshow .prev").addClass("disabled"),l(e)):$(".slideshow .prev").addClass("disabled"))},c=function(){$(".slideshow .next").hasClass("disabled")||(o<s.length-1?(e=o+1,o=e,o>0&&$(".slideshow .prev").removeClass("disabled"),o>=s.length-1&&$(".slideshow .next").addClass("disabled"),l(e)):$(".slideshow .next").addClass("disabled"))},l=function(e){$.each(i,function(a,n){console.log(t,100*a-100*e+"%"),$(n).animate({left:100*a-100*e+"%"},500,"easeInOutQuart")}),$.each(s,function(a,n){console.log(t,100*a-100*e+"%"),$(n).animate({left:100*a-100*e+"%"},500,"easeInOutQuart")}),$(".slideshow-nav-wrap .position").html(e+1+"/4")};$(".slideshow .prev").on("click",h),$(".slideshow .next").on("click",c);var u=function(){$.each(r,function(e,t){t.getBoundingClientRect().top<n-50&&$(t).animate({opacity:1},500,"easeInQuart")})},p=function(){u()};$(window).on("scroll",p),$(document).on("ready",function(){u(),$(".social-icons a.email").attr("href","mailto:?subject="+encodeURIComponent("Check Out The Story Behind: #HeForShe")+"&body="+encodeURIComponent("#HeForShe represents the UN Women's solidarity movement for gender equality. Though it launched in March 2014, it didn't get much fanfare until a woman, Emma Watson, announced her role as UN Women Goodwill Ambassador on July 7, 2014, to her 13.6 million Twitter followers.\n\nRead the story behind #HeForShe here: series.hashtagsunplugged.com/heforshe"))})},TheDressPage=function(){var e,t=new SocialModule,a=$(window).width(),n=$(window).height(),o=function(){$(".intro .inner-wrapper").animate({opacity:1},400,"easeInOutQuart",function(){$(".intro .choice").eq(0).animate({opacity:1},600,"easeInOutQuart",function(){a>=768?$(".intro .choice").eq(1).animate({opacity:1},600,"easeInOutQuart",function(){$(".intro .choice").eq(2).animate({opacity:1},600,"easeInOutQuart")}):$(".intro .choice").eq(2).animate({opacity:1},600,"easeInOutQuart")})})},i=function(){e=$(this).attr("data-choice"),$(".intro .inner-wrapper").fadeOut(800,"easeInOutQuart"),$(".gold-side").animate({width:"whitengold"===e?"100%":0,borderLeftWidth:0},800,"easeInOutQuart",function(){s(),$(".intro").fadeOut(800,"easeInOutQuart",function(){$(".intro").remove(),$("body").removeClass("locked")})}),$(window).scrollTop(0)},s=function(){$("body").attr("data-color",e),$(".hashtag-header .dot-icon").removeClass("active"),$(".hashtag-header .dot-icon."+e).addClass("active"),"whitengold"===e?$(".hero h5").html("White And Gold Edition"):$(".hero h5").html("Black And Blue Edition")},r=function(){a>=768?($(".top-slice").css("border-right-width",a-65),$(".bottom-slice").css("border-left-width",a-65)):($(".top-slice").css("border-right-width",a),$(".bottom-slice").css("border-left-width",a)),$(".intro .gold-side").css("border-bottom-width",n)};$(".intro .choice").not(".or").on("click",i),$(".hashtag-header .dot-icon").on("click",function(){e=$(this).attr("data-choice"),s()}),$(".social-icons a").on("click",function(e){var a="http://series.hashtagsunplugged.com/thedress",n="The Story Behind #TheDress that appeared to be either white and gold or black and blue. #BehindTheHashtag",o=$(this).attr("data-social");t.share(e,o,a,n)});var d=function(){var e=$(this).parents(".video-wrap").find("iframe").attr("data-src"),t=$(this).parent();$(this).parents(".video-wrap").find("iframe").attr("src",e),t.animate({opacity:0},600,function(){t.remove()})};$(".video-wrap .play-btn-wrap").on("click",d),$(document).on("ready",function(){o(),r(),$(".social-icons a.email").attr("href","mailto:?subject="+encodeURIComponent("Check Out The Story Behind #TheDress")+"&body="+encodeURIComponent("On February 26, Buzzfeed’s Cates Holderness published a post on Tumblr sharing the image of a dress that appeared to be either white and gold or black and blue, after receiving a message from a user named swiked. The rest is history. \n\nRead the story behind #TheDress here: series.hashtagsunplugged.com/thedress"))}),$(window).on("resize",function(){a=$(window).width(),n=$(window).height(),r()})},WhyIStayedPage=function(){var e,t=new SocialModule,a=$(window).width(),n=$(window).height(),o=$(".line.start"),i=$(".line").not(".start"),s=$("section"),r=($(".carousel-wrap"),$(".carousel .slide")),d=$(".carousel-dots .dot"),h=0,c=1,l=function(e){setTimeout(function(){$(o[e]).hasClass("animated")||$(o[e]).addClass("animated")},750*e)},u=function(){a>=768?$.each(o,function(e,t){l(e)}):setTimeout(function(){$(o).addClass("animated")},350)},p=function(){$.each(i,function(e,t){t.getBoundingClientRect().top<n-50&&($(t).hasClass("animated")||$(t).addClass("animated"))})},f=function(){$.each(s,function(e,t){t.getBoundingClientRect().top<n-50&&!$(t).hasClass("animated")&&($(t).hasClass("red-wrap")?($(t).find(".red-bg-color").animate({height:"100%"},1e3,"easeInOutQuart"),setTimeout(function(){$(t).find(".inner-wrapper").animate({opacity:1},500,"easeInQuart")},500)):$(t).find(".inner-wrapper").animate({opacity:1},500,"easeInQuart"),$(t).addClass("animated"))})},w=function(){var e=$(this).parents(".carousel-wrap");e.find(".prev").hasClass("disabled")||(h>0?(c=h-1,h=c,h<r.length-1&&e.find(".next").removeClass("disabled"),0===h&&e.find(".prev").addClass("disabled"),g(c,e)):e.find(".prev").addClass("disabled")),ga("send","event","#WhyIStayed","click","Carousel - Prev Arrow")},m=function(){var e=$(this).parents(".carousel-wrap");console.log(e),e.find(".next").hasClass("disabled")||(h<r.length-1?(c=h+1,h=c,h>0&&e.find(".prev").removeClass("disabled"),h>=r.length-1&&e.find(".next").addClass("disabled"),g(c,e)):e.find(".next").addClass("disabled")),ga("send","event","#WhyIStayed","click","Carousel - Next Arrow")},g=function(t,a){a.find(".slide").removeClass("active"),a.find(".dot").removeClass("active"),r=a.find(".slide"),d=a.find(".dot"),clearTimeout(e),e=setTimeout(function(){$(r[t]).addClass("active"),$(d[t]).addClass("active")},350)};$(".carousel-wrap .prev").on("click",w),$(".carousel-wrap .next").on("click",m),$(".carousel-wrap .dot").on("click",function(){var e=$(this).parents(".carousel-wrap");h=$(this).index(),g($(this).index(),e),0===h?e.find(".prev").addClass("disabled"):e.find(".prev").removeClass("disabled"),h===e.find(".slide").length-1?e.find(".next").addClass("disabled"):e.find(".next").removeClass("disabled"),ga("send","event","#WhyIStayed","click","Carousel - Dot")}),$(".social-icons a").on("click",function(e){var a="http://series.hashtagsunplugged.com/whyistayed",n="The Story Behind #WhyIStayed which unveils some of the complexities around domestic violence. #BehindTheHashtag",o=$(this).attr("data-social");t.share(e,o,a,n)});var v=function(){p(),f()};$(window).on("scroll",v),$(document).on("ready",function(){u(),p(),f(),$(".social-icons a.email").attr("href","mailto:?subject="+encodeURIComponent("Check Out The Story Behind #WhyStayed")+"&body="+encodeURIComponent("\"But I think with all the criticisms, the key for me is that #WhyIStayed isn't an endorsement of staying in an abusive relationship. You know, rather it's simply providing an answer to society's question. They asked and we answered.\" - Beverly Gooden, on NPR’s All Things Considered \n\nRead the story behind #WhyIStayed here: series.hashtagsunplugged.com/whyistayed"))}),$(window).on("resize",function(){a=$(window).width(),n=$(window).height()})},page=$("body").attr("data-page");switch(new NavModule,new SocialModule,page){case"heforshe":new HeForShePage;break;case"thedress":new TheDressPage;break;case"whyistayed":new WhyIStayedPage;break;case"100happydays":new HappyDaysPage}